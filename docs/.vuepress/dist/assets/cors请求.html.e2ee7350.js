import{_ as l,r as e,o as i,c as u,a,w as r,b as n,d as s,e as o}from"./app.be7be229.js";const d={},k=n("h1",{id:"\u8DE8\u57DF\u8BF7\u6C42",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u8DE8\u57DF\u8BF7\u6C42","aria-hidden":"true"},"#"),s(" \u8DE8\u57DF\u8BF7\u6C42")],-1),v=o(`<h2 id="\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u63CF\u8FF0" aria-hidden="true">#</a> \u63CF\u8FF0</h2><p>CORS\u662F\u4E00\u4E2AW3C\u6807\u51C6\uFF0C\u5168\u79F0\u662F&quot;\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB&quot;\uFF08Cross-origin resource sharing\uFF09\u3002\u662F\u6D4F\u89C8\u5668\u7684\u8D44\u6E90\u7B56\u7565\u4E4B\u4E00\u3002\u4E3B\u8981\u662F\u4EE5\u4E0B\u7684http\u8BF7\u6C42\u5934\u548C\u54CD\u5E94\u5934\u5B57\u6BB5</p><ol><li><code>Access-Control-Allow-Origin\uFF1A* </code> \u8BE5\u5B57\u6BB5\u662F\u5FC5\u987B\u7684\u3002\u5B83\u7684\u503C\u8981\u4E48\u662F\u8BF7\u6C42\u65F6Origin\u5B57\u6BB5\u7684\u503C\uFF0C\u8981\u4E48\u662F\u4E00\u4E2A*\uFF0C\u8868\u793A\u63A5\u53D7\u4EFB\u610F\u57DF\u540D\u7684\u8BF7\u6C42\u3002</li><li><code>Access-Control-Allow-Credentials: true</code> \u8BE5\u5B57\u6BB5\u53EF\u9009\u3002\u5B83\u7684\u503C\u662F\u4E00\u4E2A\u5E03\u5C14\u503C\uFF0C\u8868\u793A\u662F\u5426\u5141\u8BB8\u53D1\u9001Cookie\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CCookie\u4E0D\u5305\u62EC\u5728CORS\u8BF7\u6C42\u4E4B\u4E2D\u3002\u8BBE\u4E3Atrue\uFF0C\u5373\u8868\u793A\u670D\u52A1\u5668\u660E\u786E\u8BB8\u53EF\uFF0CCookie\u53EF\u4EE5\u5305\u542B\u5728\u8BF7\u6C42\u4E2D\uFF0C\u4E00\u8D77\u53D1\u7ED9\u670D\u52A1\u5668\u3002\u8FD9\u4E2A\u503C\u4E5F\u53EA\u80FD\u8BBE\u4E3Atrue\uFF0C\u5982\u679C\u670D\u52A1\u5668\u4E0D\u8981\u6D4F\u89C8\u5668\u53D1\u9001Cookie\uFF0C\u5220\u9664\u8BE5\u5B57\u6BB5\u5373\u53EF\u3002\u524D\u7AEF\u9700\u8981\u5728js\u4E2D\u5199</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5982\u679C\u8981\u53D1\u9001Cookie\uFF0CAccess-Control-Allow-Origin\u5C31\u4E0D\u80FD\u8BBE\u4E3A\u661F\u53F7\uFF0C\u5FC5\u987B\u6307\u5B9A\u660E\u786E\u7684\u3001\u4E0E\u8BF7\u6C42\u7F51\u9875\u4E00\u81F4\u7684\u57DF\u540D\u3002\u540C\u65F6\uFF0CCookie\u4F9D\u7136\u9075\u5FAA\u540C\u6E90\u653F\u7B56\uFF0C\u53EA\u6709\u7528\u670D\u52A1\u5668\u57DF\u540D\u8BBE\u7F6E\u7684Cookie\u624D\u4F1A\u4E0A\u4F20\uFF0C\u5176\u4ED6\u57DF\u540D\u7684Cookie\u5E76\u4E0D\u4F1A\u4E0A\u4F20\uFF0C\u4E14\uFF08\u8DE8\u6E90\uFF09\u539F\u7F51\u9875\u4EE3\u7801\u4E2D\u7684document.cookie\u4E5F\u65E0\u6CD5\u8BFB\u53D6\u670D\u52A1\u5668\u57DF\u540D\u4E0B\u7684Cookie\u3002</p><ol start="3"><li><p><code>Access-Control-Expose-Headers: xxx</code> \u8BE5\u5B57\u6BB5\u53EF\u9009\u3002CORS\u8BF7\u6C42\u65F6\uFF0CXMLHttpRequest\u5BF9\u8C61\u7684getResponseHeader()\u65B9\u6CD5\u53EA\u80FD\u62FF\u52306\u4E2A\u57FA\u672C\u5B57\u6BB5\uFF1ACache-Control\u3001Content-Language\u3001Content-Type\u3001Expires\u3001Last-Modified\u3001Pragma\u3002\u5982\u679C\u60F3\u62FF\u5230\u5176\u4ED6\u5B57\u6BB5\uFF0C\u5C31\u5FC5\u987B\u5728Access-Control-Expose-Headers\u91CC\u9762\u6307\u5B9A\u3002\u4E0A\u9762\u7684\u4F8B\u5B50\u6307\u5B9A\uFF0CgetResponseHeader(&#39;FooBar&#39;)\u53EF\u4EE5\u8FD4\u56DEFooBar\u5B57\u6BB5\u7684\u503C\u3002</p></li><li><p><code>Access-Control-Request-Method: POST</code> \u8BE5\u5B57\u6BB5\u662F\u5FC5\u987B\u7684\uFF0C\u7528\u6765\u5217\u51FA\u6D4F\u89C8\u5668\u7684CORS\u8BF7\u6C42\u4F1A\u7528\u5230\u54EA\u4E9BHTTP\u65B9\u6CD5\uFF0C\u5982POST</p></li><li><p><code>Access-Control-Request-Headers: token</code> \u8BE5\u5B57\u6BB5\u662F\u4E00\u4E2A\u9017\u53F7\u5206\u9694\u7684\u5B57\u7B26\u4E32\uFF0C\u6307\u5B9A\u6D4F\u89C8\u5668CORS\u8BF7\u6C42\u4F1A\u989D\u5916\u53D1\u9001\u7684\u5934\u4FE1\u606F\u5B57\u6BB5\uFF0C\u6BD4\u5982\u63D0\u4EA4token</p></li><li><p><code>Access-Control-Allow-Methods:</code> \u8BE5\u5B57\u6BB5\u5FC5\u9700\uFF0C\u5B83\u7684\u503C\u662F\u9017\u53F7\u5206\u9694\u7684\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u8868\u660E\u670D\u52A1\u5668\u652F\u6301\u7684\u6240\u6709\u8DE8\u57DF\u8BF7\u6C42\u7684\u65B9\u6CD5\u3002\u6CE8\u610F\uFF0C\u8FD4\u56DE\u7684\u662F\u6240\u6709\u652F\u6301\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u5355\u662F\u6D4F\u89C8\u5668\u8BF7\u6C42\u7684\u90A3\u4E2A\u65B9\u6CD5\u3002\u8FD9\u662F\u4E3A\u4E86\u907F\u514D\u591A\u6B21&quot;\u9884\u68C0&quot;\u8BF7\u6C42\u3002</p></li><li><p><code>Access-Control-Allow-Headers</code> \u5982\u679C\u524D\u7AEF\u7684\u8BF7\u6C42\u63D0\u4EA4\u4E86 <code>Access-Control-Request-Headers: token</code>\uFF0C\u90A3\u4E48\u5C31\u8981\u8FD4\u56DE<code>Access-Control-Allow-Headers: token</code>\u56DE\u53BB\uFF0C\u4F46\u662F\u4E0D\u9650\u4E8E\u53EA\u8FD4\u56DE&#39;token&#39;</p></li><li><p><code>Access-Control-Max-Age: 86400</code> \u6570\u5B57\u5355\u4F4D\u662F\u79D2\uFF0C\u4EE3\u8868\u591A\u5C11\u65F6\u95F4\u5185\uFF0C\u4E0D\u7528\u518D\u53D1OPTIONS\u8BF7\u6C42\uFF0Cgoogle\u6D4F\u89C8\u5668\u6700\u5927\u662F600\u79D2\u3002Firefox\u6700\u5927\u662F86400</p></li></ol>`,6),m={href:"https://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"},h=n("h2",{id:"\u89E3\u51B3\u8DE8\u57DF",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u89E3\u51B3\u8DE8\u57DF","aria-hidden":"true"},"#"),s(" \u89E3\u51B3\u8DE8\u57DF")],-1),b={href:"https://www.webpackjs.com/configuration/dev-server/#devserver-proxy",target:"_blank",rel:"noopener noreferrer"},C=o(`<h3 id="java-springboot\u540E\u7AEF\u89E3\u51B3\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#java-springboot\u540E\u7AEF\u89E3\u51B3\u8DE8\u57DF" aria-hidden="true">#</a> java Springboot\u540E\u7AEF\u89E3\u51B3\u8DE8\u57DF</h3><p>\u540E\u7AEF\u8BBE\u7F6E\u54CD\u5E94\u5934\u89E3\u51B3\u8DE8\u57DF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CORSInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Credentials&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Methods&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Max-Age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;86400&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Authorization,Content-Type,content-type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// \u5982\u679C\u662FOPTIONS\u5219\u7ED3\u675F\u8BF7\u6C42</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">OPTIONS</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NO_CONTENT</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx\u89E3\u51B3\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#nginx\u89E3\u51B3\u8DE8\u57DF" aria-hidden="true">#</a> nginx\u89E3\u51B3\u8DE8\u57DF</h3><p>nginx\u8BBE\u7F6E\u54CD\u5E94\u5934\u89E3\u51B3\u8DE8\u57DF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
        listen <span class="token number">3639</span><span class="token punctuation">;</span>
	      server_name www.aaa.com<span class="token punctuation">;</span>

        location / <span class="token punctuation">{</span>
                proxy_redirect off<span class="token punctuation">;</span>
                proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
                proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
                proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>

                add_header Access-Control-Allow-Origin * always<span class="token punctuation">;</span>
                add_header Access-Control-Allow-Credentials <span class="token boolean">true</span><span class="token punctuation">;</span>
                add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS<span class="token punctuation">;</span>
		add_header Access-Control-Max-Age <span class="token number">86400</span><span class="token punctuation">;</span>		

                proxy_pass http://127.0.0.1:3636<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6D4F\u89C8\u5668\u5B89\u88C5\u63D2\u4EF6\u89E3\u51B3\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#\u6D4F\u89C8\u5668\u5B89\u88C5\u63D2\u4EF6\u89E3\u51B3\u8DE8\u57DF" aria-hidden="true">#</a> \u6D4F\u89C8\u5668\u5B89\u88C5\u63D2\u4EF6\u89E3\u51B3\u8DE8\u57DF</h3><p>\u706B\u72D0\u5B89\u88C5CORS Everywhere</p>`,8);function _(g,w){const p=e("MTA"),c=e("ClientOnly"),t=e("ExternalLinkIcon");return i(),u("div",null,[k,a(c,null,{default:r(()=>[a(p)]),_:1}),v,n("p",null,[s("\u8BE6\u7EC6\u67E5\u770B"),n("a",m,[s("\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB CORS \u8BE6\u89E3 \u962E\u4E00\u5CF0"),a(t)])]),h,n("p",null,[s("\u7528webpack\u914D\u7F6Eproxy\u89E3\u51B3\u8DE8\u57DF\uFF0C\u8BE6\u7EC6\u67E5\u770B"),n("a",b,[s("\u5B98\u7F51"),a(t)])]),C])}const x=l(d,[["render",_],["__file","cors\u8BF7\u6C42.html.vue"]]);export{x as default};
