<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>call、apply | Dragon的博客</title><meta name="description" content="Dragon的博客">
    <link rel="modulepreload" href="/assets/app.be7be229.js"><link rel="modulepreload" href="/assets/apply.html.4732e15a.js"><link rel="modulepreload" href="/assets/apply.html.28e5775c.js"><link rel="prefetch" href="/assets/index.html.5315948b.js"><link rel="prefetch" href="/assets/springboot.html.12389ff2.js"><link rel="prefetch" href="/assets/assign.html.2be7c456.js"><link rel="prefetch" href="/assets/bind.html.c475086f.js"><link rel="prefetch" href="/assets/class.html.d209faa3.js"><link rel="prefetch" href="/assets/equal.html.5348be39.js"><link rel="prefetch" href="/assets/event.html.808bc2b2.js"><link rel="prefetch" href="/assets/function.html.6ecdaa64.js"><link rel="prefetch" href="/assets/instanceof.html.570a569b.js"><link rel="prefetch" href="/assets/let_var.html.bc27ba03.js"><link rel="prefetch" href="/assets/module.html.0f7b2362.js"><link rel="prefetch" href="/assets/new.html.460266aa.js"><link rel="prefetch" href="/assets/promise1.html.f033c91e.js"><link rel="prefetch" href="/assets/promise2.html.23b8e119.js"><link rel="prefetch" href="/assets/scope.html.7972736c.js"><link rel="prefetch" href="/assets/this.html.cde05b96.js"><link rel="prefetch" href="/assets/http.html.947c2389.js"><link rel="prefetch" href="/assets/tcp_udp.html.36b264f4.js"><link rel="prefetch" href="/assets/cookie和session.html.7cbcdb4a.js"><link rel="prefetch" href="/assets/cors请求.html.ff488a0d.js"><link rel="prefetch" href="/assets/oauth2.0和jwt.html.f9dd3da6.js"><link rel="prefetch" href="/assets/xss与csrf.html.7baefeaf.js"><link rel="prefetch" href="/assets/sort.html.8a275f43.js"><link rel="prefetch" href="/assets/base.html.e69da62f.js"><link rel="prefetch" href="/assets/gymnastics.html.87528ec2.js"><link rel="prefetch" href="/assets/polyfill.html.1411e9c3.js"><link rel="prefetch" href="/assets/tsconfig.html.a6c68a22.js"><link rel="prefetch" href="/assets/babel.html.16e96e69.js"><link rel="prefetch" href="/assets/react-hooks.html.d79be41b.js"><link rel="prefetch" href="/assets/url.html.6cc10f68.js"><link rel="prefetch" href="/assets/vue3.html.da645933.js"><link rel="prefetch" href="/assets/webassembly.html.72d02562.js"><link rel="prefetch" href="/assets/webpack1.html.70f93b14.js"><link rel="prefetch" href="/assets/webpack2.html.c264079b.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.21977a47.js"><link rel="prefetch" href="/assets/springboot.html.b6c21b0d.js"><link rel="prefetch" href="/assets/assign.html.b9f4ea1d.js"><link rel="prefetch" href="/assets/bind.html.00493234.js"><link rel="prefetch" href="/assets/class.html.335dca1a.js"><link rel="prefetch" href="/assets/equal.html.700c6187.js"><link rel="prefetch" href="/assets/event.html.088e58a5.js"><link rel="prefetch" href="/assets/function.html.e10e29cf.js"><link rel="prefetch" href="/assets/instanceof.html.4d4438d8.js"><link rel="prefetch" href="/assets/let_var.html.c5558da6.js"><link rel="prefetch" href="/assets/module.html.d605fb4d.js"><link rel="prefetch" href="/assets/new.html.ccfa2a04.js"><link rel="prefetch" href="/assets/promise1.html.238d52af.js"><link rel="prefetch" href="/assets/promise2.html.d20f8f06.js"><link rel="prefetch" href="/assets/scope.html.4eb3fa18.js"><link rel="prefetch" href="/assets/this.html.72d06808.js"><link rel="prefetch" href="/assets/http.html.88b4ea0e.js"><link rel="prefetch" href="/assets/tcp_udp.html.326ae92f.js"><link rel="prefetch" href="/assets/cookie和session.html.79f4094e.js"><link rel="prefetch" href="/assets/cors请求.html.e2ee7350.js"><link rel="prefetch" href="/assets/oauth2.0和jwt.html.9e271a97.js"><link rel="prefetch" href="/assets/xss与csrf.html.9f1390b7.js"><link rel="prefetch" href="/assets/sort.html.d53b6129.js"><link rel="prefetch" href="/assets/base.html.2e9eb7a9.js"><link rel="prefetch" href="/assets/gymnastics.html.3eeb4b48.js"><link rel="prefetch" href="/assets/polyfill.html.737a7fc7.js"><link rel="prefetch" href="/assets/tsconfig.html.486f12f6.js"><link rel="prefetch" href="/assets/babel.html.709029c4.js"><link rel="prefetch" href="/assets/react-hooks.html.67187bca.js"><link rel="prefetch" href="/assets/url.html.2383c82d.js"><link rel="prefetch" href="/assets/vue3.html.d28fc0ff.js"><link rel="prefetch" href="/assets/webassembly.html.6273b3ee.js"><link rel="prefetch" href="/assets/webpack1.html.dda79cfb.js"><link rel="prefetch" href="/assets/webpack2.html.c85aee14.js"><link rel="prefetch" href="/assets/404.html.8a43608f.js">
    <link rel="stylesheet" href="/assets/style.6160b0f0.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Dragon的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">javascript <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/js/this.html" class="sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----></li><li><a href="/js/class.html" class="sidebar-item" aria-label="类"><!--[--><!--]--> 类 <!--[--><!--]--></a><!----></li><li><a href="/js/event.html" class="sidebar-item" aria-label="事件循环机制/Event loop"><!--[--><!--]--> 事件循环机制/Event loop <!--[--><!--]--></a><!----></li><li><a href="/js/function.html" class="sidebar-item" aria-label="函数"><!--[--><!--]--> 函数 <!--[--><!--]--></a><!----></li><li><a href="/js/module.html" class="sidebar-item" aria-label="CommonJS、AMD、CMD、ESM、UMD"><!--[--><!--]--> CommonJS、AMD、CMD、ESM、UMD <!--[--><!--]--></a><!----></li><li><a href="/js/promise1.html" class="sidebar-item" aria-label="Promise--上"><!--[--><!--]--> Promise--上 <!--[--><!--]--></a><!----></li><li><a href="/js/promise2.html" class="sidebar-item" aria-label="Promise--下"><!--[--><!--]--> Promise--下 <!--[--><!--]--></a><!----></li><li><a href="/js/scope.html" class="sidebar-item" aria-label="作用域"><!--[--><!--]--> 作用域 <!--[--><!--]--></a><!----></li><li><a href="/js/new.html" class="sidebar-item" aria-label="new"><!--[--><!--]--> new <!--[--><!--]--></a><!----></li><li><a href="/js/let,var.html" class="sidebar-item" aria-label="let和var"><!--[--><!--]--> let和var <!--[--><!--]--></a><!----></li><li><a href="/js/bind.html" class="sidebar-item" aria-label="bind"><!--[--><!--]--> bind <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/js/apply.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="call、apply"><!--[--><!--]--> call、apply <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/js/apply.html#call" class="router-link-active router-link-exact-active sidebar-item" aria-label="call"><!--[--><!--]--> call <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/js/apply.html#call的模拟实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="call的模拟实现"><!--[--><!--]--> call的模拟实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/js/apply.html#call的es规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="call的es规范"><!--[--><!--]--> call的es规范 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/js/apply.html#apply" class="router-link-active router-link-exact-active sidebar-item" aria-label="apply"><!--[--><!--]--> apply <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/js/apply.html#apply的实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="apply的实现"><!--[--><!--]--> apply的实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/js/apply.html#apply的es规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="apply的es规范"><!--[--><!--]--> apply的es规范 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/js/equal.html" class="sidebar-item" aria-label="隐式转换 == 和 ==="><!--[--><!--]--> 隐式转换 == 和 === <!--[--><!--]--></a><!----></li><li><a href="/js/assign.html" class="sidebar-item" aria-label="Object.assign和...（展开运算符/扩展运算符）的区别 [已发帖]"><!--[--><!--]--> Object.assign和...（展开运算符/扩展运算符）的区别 [已发帖] <!--[--><!--]--></a><!----></li><li><a href="/js/instanceof.html" class="sidebar-item" aria-label="instanceof [已发帖]"><!--[--><!--]--> instanceof [已发帖] <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">typescript <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/typescript/tsconfig.html" class="sidebar-item" aria-label="tsconfig.json配置"><!--[--><!--]--> tsconfig.json配置 <!--[--><!--]--></a><!----></li><li><a href="/typescript/base.html" class="sidebar-item" aria-label="typescript基础"><!--[--><!--]--> typescript基础 <!--[--><!--]--></a><!----></li><li><a href="/typescript/polyfill.html" class="sidebar-item" aria-label="工具类的模拟实现"><!--[--><!--]--> 工具类的模拟实现 <!--[--><!--]--></a><!----></li><li><a href="/typescript/gymnastics.html" class="sidebar-item" aria-label="ts类型体操训练"><!--[--><!--]--> ts类型体操训练 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">前端相关 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/web/webpack1.html" class="sidebar-item" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a><!----></li><li><a href="/web/webpack2.html" class="sidebar-item" aria-label="webpack 和 vite"><!--[--><!--]--> webpack 和 vite <!--[--><!--]--></a><!----></li><li><a href="/web/url.html" class="sidebar-item" aria-label="浏览器从输入url发生了什么[未完...]"><!--[--><!--]--> 浏览器从输入url发生了什么[未完...] <!--[--><!--]--></a><!----></li><li><a href="/web/babel.html" class="sidebar-item" aria-label="babel"><!--[--><!--]--> babel <!--[--><!--]--></a><!----></li><li><a href="/web/webassembly.html" class="sidebar-item" aria-label="快速入门WebAssembly/wasm"><!--[--><!--]--> 快速入门WebAssembly/wasm <!--[--><!--]--></a><!----></li><li><a href="/web/vue3.html" class="sidebar-item" aria-label="vue3源码[未完...]"><!--[--><!--]--> vue3源码[未完...] <!--[--><!--]--></a><!----></li><li><a href="/web/react-hooks.html" class="sidebar-item" aria-label="React Hooks源码"><!--[--><!--]--> React Hooks源码 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">web安全相关 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/security/xss%E4%B8%8Ecsrf.html" class="sidebar-item" aria-label="XSS和CSRF"><!--[--><!--]--> XSS和CSRF <!--[--><!--]--></a><!----></li><li><a href="/security/cors%E8%AF%B7%E6%B1%82.html" class="sidebar-item" aria-label="跨域请求"><!--[--><!--]--> 跨域请求 <!--[--><!--]--></a><!----></li><li><a href="/security/cookie%E5%92%8Csession.html" class="sidebar-item" aria-label="cookie 和 session"><!--[--><!--]--> cookie 和 session <!--[--><!--]--></a><!----></li><li><a href="/security/oauth2.0%E5%92%8Cjwt.html" class="sidebar-item" aria-label="OAuth2.0和JWT"><!--[--><!--]--> OAuth2.0和JWT <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">计算机网络相关 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/network/http.html" class="sidebar-item" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a><!----></li><li><a href="/network/tcp,udp.html" class="sidebar-item" aria-label="TCP/UDP"><!--[--><!--]--> TCP/UDP <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">java <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/java/springboot.html" class="sidebar-item" aria-label="springboot"><!--[--><!--]--> springboot <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="call、apply" tabindex="-1"><a class="header-anchor" href="#call、apply" aria-hidden="true">#</a> call、apply</h1><!----><h2 id="call" tabindex="-1"><a class="header-anchor" href="#call" aria-hidden="true">#</a> call</h2><h3 id="call的模拟实现" tabindex="-1"><a class="header-anchor" href="#call的模拟实现" aria-hidden="true">#</a> call的模拟实现</h3><p>基本用法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">||</span> window<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;arguments[&#39;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&#39;]&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&#39;context.fn(&#39;</span> <span class="token operator">+</span> args <span class="token operator">+</span><span class="token string">&#39;)&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// context.fn(arguments[1],arguments[2])</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="call的es规范" tabindex="-1"><a class="header-anchor" href="#call的es规范" aria-hidden="true">#</a> call的es规范</h3><p><a href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-function.prototype.call" target="_blank" rel="noopener noreferrer">20.2.3.3 Function.prototype.call ( thisArg, ...args )<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>This method performs the following steps when called:</p><blockquote><p>此方法在调用时执行以下步骤：</p></blockquote><ol><li>Let <code>func</code> be the <code>this</code> value.</li></ol><blockquote><p>设置<code>func</code>为<code>this</code>值</p></blockquote><ol start="2"><li>If <code>IsCallable(func)</code> is <code>false</code>, throw a <code>TypeError</code> exception.</li></ol><blockquote><p>如果 <code>IsCallable(func)</code> 是 <code>false</code>，抛出一个<code>TypeError</code>的异常。</p></blockquote><ol start="3"><li>Perform <code>PrepareForTailCall()</code>.</li></ol><blockquote><p>执行 <code>PrepareForTailCall()</code>.</p></blockquote><ol start="4"><li>Return ? <code>Call(func, thisArg, args)</code>.</li></ol><blockquote><p>返回<code>Call(func, thisArg, args)</code>的结果</p></blockquote><div class="custom-container tip"><p class="custom-container-title">NOTE 1</p><p>The thisArg value is passed without modification as the this value. This is a change from Edition 3, where an undefined or null thisArg is replaced with the global object and ToObject is applied to all other values and that result is passed as the this value. Even though the thisArg is passed without modification, non-strict functions still perform these transformations upon entry to the function.</p><blockquote><p>thisArg值作为this值传递而不进行修改。这是版本3的一个变化，在版本3中，未定义或空的thisArg被替换为全局对象，ToObject应用于所有其他值，结果作为This值传递。即使传递了thisArg而没有修改，非严格函数仍然在进入函数时执行这些转换。</p></blockquote></div><div class="custom-container tip"><p class="custom-container-title">NOTE 2</p><p>If func is an arrow function or a bound function exotic object then the thisArg will be ignored by the function [[Call]] in step 4.</p><blockquote><p>如果func是箭头函数或绑定函数外来对象，则步骤4中的函数[[Call]]将忽略thisArg。</p></blockquote></div><p><a href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iscallable" target="_blank" rel="noopener noreferrer">7.2.3 IsCallable ( argument )<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>The abstract operation IsCallable takes argument argument (an ECMAScript language value) and returns a Boolean. It determines if argument is a callable function with a [[Call]] internal method. It performs the following steps when called:</p><blockquote><p>抽象操作IsCallable接受参数（js语言类型的值）并返回布尔值。它确定参数是否是具有[[Call]]内部方法的可调用函数。调用时，它执行以下步骤：</p></blockquote><ol><li>If <code>argument</code> is not an <code>Object</code>, return <code>false</code>.</li></ol><blockquote><p>如果<code>argument</code>不是Object, 返回false</p></blockquote><ol start="2"><li>If <code>argument</code> has a [[Call]] internal method, return <code>true</code>.</li></ol><blockquote><p>如果<code>argument</code>有[[Call]]内部可调用的方法，返回<code>true</code></p></blockquote><ol start="3"><li>Return <code>false</code>.</li></ol><blockquote><p>返回false</p></blockquote><h2 id="apply" tabindex="-1"><a class="header-anchor" href="#apply" aria-hidden="true">#</a> apply</h2><h3 id="apply的实现" tabindex="-1"><a class="header-anchor" href="#apply的实现" aria-hidden="true">#</a> apply的实现</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">||</span> window<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> result<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;arr[&#39;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&#39;]&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&#39;context.fn(&#39;</span> <span class="token operator">+</span> args <span class="token operator">+</span> <span class="token string">&#39;)&#39;</span><span class="token punctuation">)</span> <span class="token comment">// context.fn(arr[0],arr[1])</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="apply的es规范" tabindex="-1"><a class="header-anchor" href="#apply的es规范" aria-hidden="true">#</a> apply的es规范</h3><p><a href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-function.prototype.apply" target="_blank" rel="noopener noreferrer">20.2.3.1 Function.prototype.apply ( thisArg, argArray )<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>This method performs the following steps when called:</p><blockquote><p>此方法在调用时执行以下步骤：</p></blockquote><ol><li>Let <code>func</code> be the <code>this</code> value.</li></ol><blockquote><p>设置<code>func</code>为<code>this</code>值</p></blockquote><ol start="2"><li>If <code>IsCallable(func)</code> is <code>false</code>, throw a <code>TypeError</code> exception.</li></ol><blockquote><p>如果 <code>IsCallable(func)</code> 是 <code>false</code>，抛出一个<code>TypeError</code>的异常。</p></blockquote><ol start="3"><li>If <code>argArray</code> is <code>undefined</code> or <code>null</code>, then</li></ol><blockquote><p>如果 <code>argArray</code> 是<code>undefined</code>或者<code>null</code>, 则 1. Perform <code>PrepareForTailCall()</code>. 执行 <code>PrepareForTailCall()</code> 2. Return ? <code>Call(func, thisArg)</code>. 返回<code>Call(func, thisArg)</code>的结果</p></blockquote><ol start="4"><li>Let <code>argList</code> be ? <code>CreateListFromArrayLike(argArray)</code>.</li></ol><blockquote><p><code>argList</code>为<code>CreateListFromArrayLike(argArray)</code>（CreateListFromArrayLike函数可以返回一个列表值，其元素由obj的索引提供）</p></blockquote><ol start="5"><li>Perform <code>PrepareForTailCall()</code>.</li></ol><blockquote><p>执行 <code>PrepareForTailCall()</code></p></blockquote><ol start="6"><li>Return ? <code>Call(func, thisArg, argList)</code>.</li></ol><blockquote><p>返回<code>Call(func, thisArg, args)</code>的结果</p></blockquote><div class="custom-container tip"><p class="custom-container-title">NOTE 1</p><p>The thisArg value is passed without modification as the this value. This is a change from Edition 3, where an undefined or null thisArg is replaced with the global object and ToObject is applied to all other values and that result is passed as the this value. Even though the thisArg is passed without modification, non-strict functions still perform these transformations upon entry to the function.</p><blockquote><p>thisArg值作为this值传递而不进行修改。这是版本3的一个变化，在版本3中，未定义或空的thisArg被替换为全局对象，ToObject应用于所有其他值，结果作为This值传递。即使传递了thisArg而没有修改，非严格函数仍然在进入函数时执行这些转换。</p></blockquote></div><div class="custom-container tip"><p class="custom-container-title">NOTE 2</p><p>If func is an arrow function or a bound function exotic object then the thisArg will be ignored by the function [[Call]] in step 6.</p><blockquote><p>如果func是箭头函数或绑定函数外来对象，则步骤6中的函数[[Call]]将忽略thisArg。</p></blockquote></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/js/bind.html" class="" aria-label="bind"><!--[--><!--]--> bind <!--[--><!--]--></a></span><span class="next"><a href="/js/equal.html" class="" aria-label="隐式转换 == 和 ==="><!--[--><!--]--> 隐式转换 == 和 === <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.be7be229.js" defer></script>
  </body>
</html>
